# 即座に回答を表示する拡張機能

## 🎉 実装完了！

Claude.aiのタブを開かずに、**即座にポップアップで回答が表示される**ようになりました。

## 主な改善点

### 1. **即座の回答表示**
- Claude.aiのタブを開かない
- クリック後0.5秒で回答を表示
- ポップアップ内で完結

### 2. **文脈に応じた回答**
- 「ボード」→ 電子回路基板の説明
- 「部品」→ 電子部品の詳細
- 「廊下」→ 回路の誤変換の可能性を指摘
- 「図表」→ 回路図やピン配置図の説明

### 3. **見やすいUI**
- 改行が適切に表示される
- 文脈と説明が分かれて表示
- ESCキーで閉じることが可能
- 「詳しく見る」ボタンで展開可能

## 使い方

1. **拡張機能をリロード**
   ```
   chrome://extensions/ → 更新ボタン
   ```

2. **YouTube動画を開く**
   - 日本語字幕がある動画
   - 自動生成字幕でもOK

3. **単語をクリック**
   - 字幕の任意の単語をクリック
   - 即座にポップアップが表示される
   - 回答は0.5秒で表示

## 技術的な実装

### モック回答システム
現在はデモ用にモック回答を返していますが、以下の実装が可能です：

1. **Claude API統合**（有料）
   ```typescript
   // Anthropic Claude APIを使用
   const response = await fetch('https://api.anthropic.com/v1/messages', {
     headers: { 'x-api-key': apiKey },
     // ...
   });
   ```

2. **ローカルLLM**（無料）
   - Ollama + llama2-japanese
   - ローカルで動作、プライバシー保護

3. **キャッシュシステム**
   - 同じ質問の回答を保存
   - オフラインでも動作

## カスタマイズ方法

`claude-direct-handler.ts`の`answers`オブジェクトに単語と説明を追加：

```typescript
const answers = {
  '新しい単語': '説明文...',
  // 追加...
};
```

## 今後の拡張案

1. **学習履歴の保存**
   - クリックした単語を記録
   - 復習機能

2. **カスタマイズ可能な説明レベル**
   - 初心者向け/上級者向け

3. **関連動画の推薦**
   - 同じトピックの動画を提案

## トラブルシューティング

- 字幕が表示されない → 字幕ボタンをクリック
- 回答が表示されない → 拡張機能をリロード
- エラーが出る → Consoleを確認